<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_91) on Sat Dec 03 10:56:12 EST 2016 -->
<title>HVServerProtocol</title>
<meta name="date" content="2016-12-03">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="HVServerProtocol";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../hvserver/HVServer.html" title="class in hvserver"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../hvserver/HVServerThread.html" title="class in hvserver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?hvserver/HVServerProtocol.html" target="_top">Frames</a></li>
<li><a href="HVServerProtocol.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">hvserver</div>
<h2 title="Class HVServerProtocol" class="title">Class HVServerProtocol</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>hvserver.HVServerProtocol</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">HVServerProtocol</span>
extends java.lang.Object</pre>
<div class="block">This class implements two type of protocol to process incoming command 
  messages. The first type of protocol(RAWPROTOCOL) is original hvmainframe command messages string
  with additional number of hvmainframe in frame list, that sending directly to hvmainframe.
  The second type is protocol(MAPPROTOCOL) to control hvchannels parameters by addressing channels 
  in detector map coordinates x,y.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>2.0 
  Last update:23-Aug-05
  Mod&Add: 23-Aug-05 add correction for axis index, if it starts not from '1'
  Mod&Add: 04-Aug-05 changing parameter (instead hvmap Vector, we using hvmt Hashtable with stored HVMapTables),
           in 'convertToIndex() change conversion formula for different direction of axis(X,Y)
           add new method 'getMapName()' to extract 'mapname' from command message;
           change command message in maprotocol to: <mapname> <command> <parameter> <address_list>
           28 Feb 2005 add searching address of hvframe only in form 'hostname:port'
           18 May 2001
           22 Nov 2001 in rawprotocol serch for hvframe by index using hostnames vector</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../hvtools/HVListener.html" title="interface in hvtools">HVListener</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../hvserver/HVServerProtocol.html#notify">notify</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../hvserver/HVServerProtocol.html#HVServerProtocol-java.util.Hashtable-java.util.Hashtable-">HVServerProtocol</a></span>(java.util.Hashtable&nbsp;hvft,
                java.util.Hashtable&nbsp;hvmt)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../hvserver/HVServerProtocol.html#HVServerProtocol-java.util.Hashtable-java.util.Hashtable-hvtools.HVListener-">HVServerProtocol</a></span>(java.util.Hashtable&nbsp;hvft,
                java.util.Hashtable&nbsp;hvmt,
                <a href="../hvtools/HVListener.html" title="interface in hvtools">HVListener</a>&nbsp;notify)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../hvserver/HVServerProtocol.html#getChannelStatus-java.lang.String-java.lang.String-">getChannelStatus</a></span>(java.lang.String&nbsp;chnaddr,
                java.lang.String&nbsp;propname)</code>
<div class="block">Returns channels property value.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../hvserver/HVServerProtocol.html#next--">next</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../hvserver/HVServerProtocol.html#processCmd-int-java.util.Vector-java.lang.String-">processCmd</a></span>(int&nbsp;cmd,
          java.util.Vector&nbsp;chind,
          java.lang.String&nbsp;value)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../hvserver/HVServerProtocol.html#processInput-java.lang.String-">processInput</a></span>(java.lang.String&nbsp;theInput)</code>
<div class="block">Process input string comman message and return reply message</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../hvserver/HVServerProtocol.html#processUpDown-java.util.Vector-java.lang.String-int-">processUpDown</a></span>(java.util.Vector&nbsp;chind,
             java.lang.String&nbsp;value,
             int&nbsp;up)</code>
<div class="block">Process command "UP" and "DOWN" .</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="notify">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>notify</h4>
<pre>public&nbsp;<a href="../hvtools/HVListener.html" title="interface in hvtools">HVListener</a> notify</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="HVServerProtocol-java.util.Hashtable-java.util.Hashtable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HVServerProtocol</h4>
<pre>public&nbsp;HVServerProtocol(java.util.Hashtable&nbsp;hvft,
                        java.util.Hashtable&nbsp;hvmt)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hvft</code> - Hashtable with stored hvframe objects in system</dd>
<dd><code>hvmap</code> - Vector with hvchannel address in format 'hostname:port.module_slot_number.channel_number',
              index of hvchannel address in hvmap is coresponded to x,y coordinates of detector map by expression:
              index = XMAX*YMAX - XMAX*(y-1) - x -1</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>HVmapTable</code></dd>
</dl>
</li>
</ul>
<a name="HVServerProtocol-java.util.Hashtable-java.util.Hashtable-hvtools.HVListener-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HVServerProtocol</h4>
<pre>public&nbsp;HVServerProtocol(java.util.Hashtable&nbsp;hvft,
                        java.util.Hashtable&nbsp;hvmt,
                        <a href="../hvtools/HVListener.html" title="interface in hvtools">HVListener</a>&nbsp;notify)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hvft</code> - Hashtable with stored hvframe objects in system</dd>
<dd><code>hvmap</code> - Vector with hvchannel address in format 'hostname:port.module_slot_number.channel_number',
              index of hvchannel address in hvmap is coresponded to x,y coordinates of detector map by expression:
              index = XMAX*YMAX - XMAX*(y-1) - x -1</dd>
<dd><code>notify</code> - HVListener to send status messages</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>HVmapTable</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="processInput-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processInput</h4>
<pre>public&nbsp;java.lang.String&nbsp;processInput(java.lang.String&nbsp;theInput)</pre>
<div class="block">Process input string comman message and return reply message</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>theInput</code> - String input command message</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>String with replay message</dd>
</dl>
</li>
</ul>
<a name="next--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>next</h4>
<pre>public&nbsp;boolean&nbsp;next()</pre>
</li>
</ul>
<a name="processCmd-int-java.util.Vector-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processCmd</h4>
<pre>public&nbsp;void&nbsp;processCmd(int&nbsp;cmd,
                       java.util.Vector&nbsp;chind,
                       java.lang.String&nbsp;value)</pre>
</li>
</ul>
<a name="processUpDown-java.util.Vector-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processUpDown</h4>
<pre>public&nbsp;java.lang.String&nbsp;processUpDown(java.util.Vector&nbsp;chind,
                                      java.lang.String&nbsp;value,
                                      int&nbsp;up)</pre>
<div class="block">Process command "UP" and "DOWN" . Calculate new value for demand voltage for requested channels and
 send its to mainframe.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>chind</code> - Vector list of channel addresses</dd>
<dd><code>value</code> - String value for changing current settings</dd>
<dd><code>up</code> - int parameter, if up=1 process 'UP' command, if up=-1, process "DOWN command</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>String error messag from mainframe or null if no errror</dd>
</dl>
</li>
</ul>
<a name="getChannelStatus-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getChannelStatus</h4>
<pre>public&nbsp;java.lang.Object&nbsp;getChannelStatus(java.lang.String&nbsp;chnaddr,
                                         java.lang.String&nbsp;propname)</pre>
<div class="block">Returns channels property value.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>chnaddr</code> - String address of channel. String in format: H#.S#S#.C#C#
                  H# - hostname:portnumber of hvframe
                  S#S# - two digit slot number (0-15)
                  C#C# - two digit channel number (0-11)</dd>
<dd><code>propname</code> - String string with property name</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../hvserver/HVServer.html" title="class in hvserver"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../hvserver/HVServerThread.html" title="class in hvserver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?hvserver/HVServerProtocol.html" target="_top">Frames</a></li>
<li><a href="HVServerProtocol.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
